# Playwright Exercise – Automated File Transfer Tests

This repository contains end-to-end tests for the Data Transfer feature using Playwright.
It demonstrates robust upload, download, and delete file workflows using the Page Object Model (POM) for clean, reusable automation.

Tests are implemented in **JavaScript/TypeScript** using **Playwright**, with a **Page Object Model (POM)** for UI tests.

---

## Project Structure

```
PlaywrightExercise/
├── tests/                                  # Main Playwright test suite
│   ├── pages/                              # Page Object Model (POM) classes
│   │   ├── BasePage.ts                     # Shared base class for all page objects (common utilities & helpers)
│   │   ├── LoginPage.ts                    # Handles login interactions (username, password, submit, etc.)
│   │   ├── DataTransferPage.ts             # Encapsulates file upload/download logic for the Data Transfer section
│   │   └── PopupHandler.ts                 # Handles popups and modals during tests
│   ├── specs/                              # Test specifications (actual test cases)
│   │   ├── dataTransfer.spec.ts            # Upload, download, and delete file flow tests
│   │   └── login.spec.ts                   # Login page tests
│   └── support/                            # Shared Playwright setup and configuration
│       ├── fixtures.ts                     # Defines test fixtures (browser context, logged-in page, etc.)
│       ├── globalSetup.ts                  # Runs once before all tests (e.g., initial login, cookies, or app state)
│       ├── storageState.chromium.json      # Stores authenticated browser state (cookies, localStorage, etc.)
│       └── storageState.firefox.json
├── uploads/                                # Test files used for upload operations
│   ├── File1.txt
│   ├── File2.txt
│   └── File3
├── downloads/                              # Destination for downloaded files during tests
├── utils/                                  # Utility functions and shared modules
│   └── env.ts                              # Loads and validates environment variables (.env)
├── .env.example                            # Template for environment configuration (copy to `.env` and fill in)
├── .github/
│   └── workflows/
│       └── playwright.yml                  # GitHub Actions workflow for running tests in CI/CD
├── test-results/                           # JSON test artifacts generated by Playwright
├── playwright-report/                      # HTML test reports generated by Playwright
├── playwright.config.ts                    # Playwright configuration (browsers, timeouts, baseURL, etc.)
├── package.json                            # Project dependencies and test scripts
├── tsconfig.json                           # TypeScript compiler configuration
└── README.md                               # Project documentation (you’re reading it!)

```

## Setup

1.  **Prerequisites:**

    Node.js v18+
    Git
    Access to the target test environment (URL, credentials)

2.  **Clone the Repository:**

    ```bash
    git clone https://github.com/afleming-7/PlaywrightExercise.git
    cd PlaywrightExercise
    ```

3.  **Install Dependencies:**

    ```bash
    npm install
    ```

4.  **Configure Environment Variables:**

    ```bash
    cp .env.example .env
    ```

    Then open .env and add your credentials and environment details, for example:

    BASE_URL=https://your-test-environment-url.com
    USERNAME=test.user
    PASSWORD=secret123
    WRONG_PASSWORD=wrong_password_here

5.  **Install Playwright Browsers:**

    ```bash
    npx playwright install
    ```

---

## Running Tests

1. **Run all tests:**

   ```bash
   npx playwright test

   ```

2. **Run a single test file:**

   ```bash
   npx playwright test tests/specs/dataTransfer.spec.ts

   ```

3. **Run with UI (headed mode):**

   ```bash
   npx playwright test --ui

   ```

4. **Run with trace viewer:**

   If a test fails, open the trace:

   ```bash
   npx playwright show-trace test-results/<trace-name>.zip
   ```

---

## Test Design Highlights

- Page Object Model (POM):
  Each page has its own class (e.g., DataTransferPage) encapsulating selectors and actions.

- Serial Test Execution:
  Tests run serially (test.describe.configure({ mode: "serial" })) to avoid shared session conflicts.

- Retry Logic & Stability:
  Uploads, downloads, and toast verifications use intelligent polling to handle slow responses.

- Dynamic Folder Selection:
  Tests can target a different subfolder by simply updating the getFolder() logic or passing a new locator.

- Error Detection:
  Invalid uploads (like File3) are handled gracefully — the test passes if an expected error toast appears.

---

## Continuous Integration (CI)

This project includes a GitHub Actions workflow:

- Every push to the repository
- Every pull request to the main branch

It:

1. Installs dependencies
2. Runs Playwright tests
3. Uploads HTML and trace reports as CI artifacts

You can view detailed test reports directly from your GitHub Actions run.

---

## Useful Commands

| Command                        | Description                                         |
| ------------------------------ | --------------------------------------------------- |
| `npx playwright test`          | Run all tests headlessly                            |
| `npx playwright test --headed` | Run tests with browser UI                           |
| `npx playwright show-report`   | View last HTML report                               |
| `npx playwright show-trace`    | Open a Playwright trace viewer                      |
| `npm run lint`                 | (Optional) Check code style if ESLint is configured |
